# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ë—ç–∫–µ–Ω–¥ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL:
```
asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "postgres"
```

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ DATABASE_URL

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `GOS 2025/backend/.env`:

```env
# –ï—Å–ª–∏ —É postgres –µ—Å—Ç—å –ø–∞—Ä–æ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "mypassword"):
DATABASE_URL=postgresql+asyncpg://postgres:mypassword@localhost:5432/saferoute

# –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—è –Ω–µ—Ç (trust authentication):
DATABASE_URL=postgresql+asyncpg://postgres@localhost:5432/saferoute
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL –±–µ–∑ –ø–∞—Ä–æ–ª—è (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –±–µ–∑ –ø–∞—Ä–æ–ª—è:

1. **–ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `pg_hba.conf`:**
```bash
# macOS (Homebrew):
/opt/homebrew/var/postgresql@14/pg_hba.conf
# –∏–ª–∏
/usr/local/var/postgresql@14/pg_hba.conf

# Linux:
/etc/postgresql/14/main/pg_hba.conf
```

2. **–ò–∑–º–µ–Ω–∏—Ç–µ –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```
host    all             all             127.0.0.1/32            md5
```

–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:
```
host    all             all             127.0.0.1/32            trust
```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL:**
```bash
# macOS (Homebrew):
brew services restart postgresql@14

# Linux:
sudo systemctl restart postgresql
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ –ø–∞—Ä–æ–ª—è

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ PostgreSQL –∫–∞–∫ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
psql -U postgres

# –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ –ø–∞—Ä–æ–ª—è (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!)
CREATE USER saferoute WITH PASSWORD NULL;
ALTER USER saferoute CREATEDB;

# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE saferoute OWNER saferoute;

# –í—ã–π–¥–∏—Ç–µ
\q
```

–ó–∞—Ç–µ–º –≤ `.env`:
```env
DATABASE_URL=postgresql+asyncpg://saferoute@localhost:5432/saferoute
```

## üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `.env`**

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥:**
```bash
cd "GOS 2025/backend"
source venv/bin/activate
python run.py
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```bash
curl http://localhost:8000/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok"}
```

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–∞—Ä–æ–ª—è

–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ –ø–∞—Ä–æ–ª—å postgres:

```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –±–µ–∑ –ø–∞—Ä–æ–ª—è:
psql -U postgres

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å:
# (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
sudo -u postgres psql
ALTER USER postgres PASSWORD 'newpassword';
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è DATABASE_URL –±—ç–∫–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö!** ‚úÖ



